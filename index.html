<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PixelArt Telegram WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --accent-color: #4a90e2;
            --text-color: #ffffff;
            --bg-color: #1a1a1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow: hidden;
        }

        body[data-theme="light"] {
            --bg-color: #ffffff;
            --text-color: #1a1a1a;
        }

        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1;
        }

        .screen.active {
            display: flex;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .anime-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a1a1a, #2a2a2a);
            z-index: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ */
        .welcome-screen {
            background: rgba(0, 0, 0, 0.7);
            text-align: center;
        }

        .welcome-text {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            line-height: 1.4;
        }

        .main-button {
            padding: 15px 40px;
            font-size: 1.2em;
            background: var(--accent-color);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            line-height: 1.4;
        }

        .main-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.3);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-screen {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .settings-container {
            width: 90%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .settings-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }

        .settings-header h2 {
            margin-left: 20px;
            font-size: 1.8em;
        }

        .profile-photo.small {
            width: 50px;
            height: 50px;
            border-radius: 25px;
        }

        .settings-section {
            margin-bottom: 25px;
        }

        .settings-section h3 {
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .theme-buttons,
        .color-options,
        .language-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .theme-button,
        .lang-button {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-button.active,
        .lang-button.active {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .color-button {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .color-button.active {
            transform: scale(1.1);
            border-color: white;
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--accent-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
      /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫ */
        .snowflake {
            position: fixed;
            pointer-events: none;
            background: white;
            border-radius: 50%;
            z-index: 2;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-container {
            width: 90%;
            max-width: 500px;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .profile-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid var(--accent-color);
        }

        .profile-name {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        .profile-id {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
        }

        .menu-buttons {
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        .menu-button {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .menu-button:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }

        .menu-button i {
            margin-right: 10px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
        .editor-screen {
            background: rgba(0, 0, 0, 0.9);
        }

        .editor-container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            text-align: center;
        }

        .image-preview {
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        #imageInput {
            display: none;
        }

        .pixel-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π */
        .news-screen {
            background: rgba(0, 0, 0, 0.9);
            overflow-y: auto;
        }

        .news-container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
            margin-top: 60px;
        }

        .news-article {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .news-article img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .news-article h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .news-article p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: var(--text-color);
            cursor: pointer;
            z-index: 10;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" */
        .about-screen {
            background: rgba(0, 0, 0, 0.9);
        }

        .about-container {
            width: 90%;
            max-width: 600px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            text-align: center;
        }

        .about-title {
            font-size: 2em;
            margin-bottom: 20px;
            color: var(--accent-color);
        }

        .about-content {
            text-align: left;
        }

        .feature-list {
            list-style-type: none;
            margin: 20px 0;
            padding-left: 20px;
        }

        .feature-list li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 25px;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            color: var(--accent-color);
            position: absolute;
            left: 0;
            font-size: 1.5em;
        }
    </style>
</head>
<body>
  <body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="anime-bg"></div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
    <div class="screen welcome-screen active" id="welcomeScreen">
        <h1 class="welcome-text">„Çà„ÅÜ„Åì„Åù<br>Welcome to PixelArt</h1>
        <button class="main-button" onclick="showScreen('profileScreen')">Âßã„ÇÅ„Åæ„Åó„Çá„ÅÜ<br>Let's Begin</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="screen profile-screen" id="profileScreen">
        <div class="profile-container">
            <img class="profile-photo" src="" alt="Profile Photo">
            <div class="profile-name"></div>
            <div class="profile-id"></div>
            
            <div class="menu-buttons">
                <button class="menu-button" onclick="showScreen('editorScreen')">
                    <i class="fas fa-image"></i> Create Pixel Art
                </button>
                <button class="menu-button" onclick="showScreen('newsScreen')">
                    <i class="fas fa-newspaper"></i> Articles
                </button>
                <button class="menu-button" onclick="showScreen('settingsScreen')">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button class="menu-button" onclick="showScreen('aboutScreen')">
                    <i class="fas fa-info-circle"></i> About App
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div class="screen editor-screen" id="editorScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="editor-container">
            <div class="image-preview">
                <img id="uploadedImage" src="" alt="Upload Image">
            </div>
            <input type="file" id="imageInput" accept="image/*">
            <label for="imageInput" class="menu-button">
                <i class="fas fa-upload"></i> Upload Image
            </label>
            
            <div class="pixel-controls">
                <button class="menu-button" data-effect="light">Light Pixel</button>
                <button class="menu-button" data-effect="medium">Medium Pixel</button>
                <button class="menu-button" data-effect="heavy">Heavy Pixel</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <div class="screen news-screen" id="newsScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="news-container" id="newsContainer">
            <!-- –ù–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="screen settings-screen" id="settingsScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="settings-container">
            <div class="settings-header">
                <img class="profile-photo small" src="" alt="Profile Photo">
                <h2>Settings</h2>
            </div>
            
            <div class="settings-section">
                <h3>Theme</h3>
                <div class="theme-buttons">
                    <button class="theme-button" data-theme="dark">Dark</button>
                    <button class="theme-button" data-theme="light">Light</button>
                </div>
            </div>

            <div class="settings-section">
                <h3>Accent Color</h3>
                <div class="color-options">
                    <button class="color-button" data-color="blue" style="background: #4a90e2;"></button>
                    <button class="color-button" data-color="purple" style="background: #9c27b0;"></button>
                    <button class="color-button" data-color="green" style="background: #4caf50;"></button>
                    <button class="color-button" data-color="orange" style="background: #ff9800;"></button>
                </div>
            </div>

            <div class="settings-section">
                <h3>Snow Effect</h3>
                <label class="toggle-switch">
                    <input type="checkbox" id="snowToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-section">
                <h3>Language</h3>
                <div class="language-options">
                    <button class="lang-button active" data-lang="en">English</button>
                    <button class="lang-button" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
                    <button class="lang-button" data-lang="ja">Êó•Êú¨Ë™û</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" -->
    <div class="screen about-screen" id="aboutScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="about-container">
            <h2 class="about-title">About PixelArt</h2>
            <div class="about-content">
                <p>Version: 1.0.0</p>
                <p>Created: February 2024</p>
                <h3>Features:</h3>
                <ul class="feature-list">
                    <li>Create unique pixel art from your images</li>
                    <li>Multiple pixelation levels</li>
                    <li>Latest news about crypto and programming</li>
                    <li>Telegram integration</li>
                    <li>User-friendly interface</li>
                </ul>
                <p>Made with ‚ù§Ô∏è for Telegram users</p>
            </div>
        </div>
    </div>
    <body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="anime-bg"></div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
    <div class="screen welcome-screen active" id="welcomeScreen">
        <h1 class="welcome-text">„Çà„ÅÜ„Åì„Åù<br>Welcome to PixelArt</h1>
        <button class="main-button" onclick="showScreen('profileScreen')">Âßã„ÇÅ„Åæ„Åó„Çá„ÅÜ<br>Let's Begin</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="screen profile-screen" id="profileScreen">
        <div class="profile-container">
            <img class="profile-photo" src="" alt="Profile Photo">
            <div class="profile-name"></div>
            <div class="profile-id"></div>
            
            <div class="menu-buttons">
                <button class="menu-button" onclick="showScreen('editorScreen')">
                    <i class="fas fa-image"></i> Create Pixel Art
                </button>
                <button class="menu-button" onclick="showScreen('newsScreen')">
                    <i class="fas fa-newspaper"></i> Articles
                </button>
                <button class="menu-button" onclick="showScreen('settingsScreen')">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button class="menu-button" onclick="showScreen('aboutScreen')">
                    <i class="fas fa-info-circle"></i> About App
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div class="screen editor-screen" id="editorScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="editor-container">
            <div class="image-preview">
                <img id="uploadedImage" src="" alt="Upload Image">
            </div>
            <input type="file" id="imageInput" accept="image/*">
            <label for="imageInput" class="menu-button">
                <i class="fas fa-upload"></i> Upload Image
            </label>
            
            <div class="pixel-controls">
                <button class="menu-button" data-effect="light">Light Pixel</button>
                <button class="menu-button" data-effect="medium">Medium Pixel</button>
                <button class="menu-button" data-effect="heavy">Heavy Pixel</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <div class="screen news-screen" id="newsScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="news-container" id="newsContainer">
            <!-- –ù–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="screen settings-screen" id="settingsScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="settings-container">
            <div class="settings-header">
                <img class="profile-photo small" src="" alt="Profile Photo">
                <h2>Settings</h2>
            </div>
            
            <div class="settings-section">
                <h3>Theme</h3>
                <div class="theme-buttons">
                    <button class="theme-button" data-theme="dark">Dark</button>
                    <button class="theme-button" data-theme="light">Light</button>
                </div>
            </div>

            <div class="settings-section">
                <h3>Accent Color</h3>
                <div class="color-options">
                    <button class="color-button" data-color="blue" style="background: #4a90e2;"></button>
                    <button class="color-button" data-color="purple" style="background: #9c27b0;"></button>
                    <button class="color-button" data-color="green" style="background: #4caf50;"></button>
                    <button class="color-button" data-color="orange" style="background: #ff9800;"></button>
                </div>
            </div>

            <div class="settings-section">
                <h3>Snow Effect</h3>
                <label class="toggle-switch">
                    <input type="checkbox" id="snowToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-section">
                <h3>Language</h3>
                <div class="language-options">
                    <button class="lang-button active" data-lang="en">English</button>
                    <button class="lang-button" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
                    <button class="lang-button" data-lang="ja">Êó•Êú¨Ë™û</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" -->
    <div class="screen about-screen" id="aboutScreen">
        <button class="back-button" onclick="showScreen('profileScreen')">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="about-container">
            <h2 class="about-title">About PixelArt</h2>
            <div class="about-content">
                <p>Version: 1.0.0</p>
                <p>Created: February 2024</p>
                <h3>Features:</h3>
                <ul class="feature-list">
                    <li>Create unique pixel art from your images</li>
                    <li>Multiple pixelation levels</li>
                    <li>Latest news about crypto and programming</li>
                    <li>Telegram integration</li>
                    <li>User-friendly interface</li>
                </ul>
                <p>Made with ‚ù§Ô∏è for Telegram users</p>
            </div>
        </div>
    </div>
      <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    let currentTheme = 'dark';
    let snowEnabled = true;
    let currentLanguage = 'en';

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
        tg.expand();
        initializeSnowfall();
        loadUserProfile();
        loadNews();
        initializeSettings();
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞–º–∏
    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function loadUserProfile() {
        const profilePhoto = document.querySelectorAll('.profile-photo');
        const profileName = document.querySelector('.profile-name');
        const profileId = document.querySelector('.profile-id');

        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            const user = tg.initDataUnsafe.user;
            profilePhoto.forEach(photo => {
                photo.src = user.photo_url || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%234a90e2"/%3E%3Ctext x="50" y="50" text-anchor="middle" dy=".3em" fill="white" font-size="40"%3Eüë§%3C/text%3E%3C/svg%3E';
            });
            profileName.textContent = `${user.first_name} ${user.last_name || ''}`;
            profileId.textContent = `ID: ${user.id}`;
        }
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–Ω–∏–º–∞—Ü–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫
    function initializeSnowfall() {
        function createSnowflake() {
            if (!snowEnabled) return;
            
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.opacity = Math.random();
            snowflake.style.width = snowflake.style.height = Math.random() * 4 + 2 + 'px';
            
            document.body.appendChild(snowflake);

            const animationDuration = Math.random() * 3 + 2;
            snowflake.style.animation = `fall ${animationDuration}s linear`;

            snowflake.addEventListener('animationend', () => {
                snowflake.remove();
            });
        }

        setInterval(createSnowflake, 100);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    document.getElementById('imageInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('uploadedImage').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });

    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–∏–∫—Å–µ–ª–∏–∑–∞—Ü–∏–∏
    document.querySelectorAll('.pixel-controls button').forEach(button => {
        button.addEventListener('click', function() {
            const effect = this.dataset.effect;
            const img = document.getElementById('uploadedImage');
            if (img.src) {
                applyPixelEffect(img, effect);
            }
        });
    });

    function applyPixelEffect(img, effect) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        const tempImg = new Image();
        tempImg.onload = function() {
            canvas.width = tempImg.naturalWidth;
            canvas.height = tempImg.naturalHeight;
            
            ctx.drawImage(tempImg, 0, 0);
            
            let pixelSize;
            switch(effect) {
                case 'light': pixelSize = 5; break;
                case 'medium': pixelSize = 10; break;
                case 'heavy': pixelSize = 20; break;
                default: pixelSize = 5;
            }

            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            for (let y = 0; y < canvas.height; y += pixelSize) {
                for (let x = 0; x < canvas.width; x += pixelSize) {
                    let r = 0, g = 0, b = 0;
                    let count = 0;
                    
                    for (let py = 0; py < pixelSize && y + py < canvas.height; py++) {
                        for (let px = 0; px < pixelSize && x + px < canvas.width; px++) {
                            const i = ((y + py) * canvas.width + (x + px)) * 4;
                            r += data[i];
                            g += data[i + 1];
                            b += data[i + 2];
                            count++;
                        }
                    }
                    
                    r = Math.floor(r / count);
                    g = Math.floor(g / count);
                    b = Math.floor(b / count);
                    
                    for (let py = 0; py < pixelSize && y + py < canvas.height; py++) {
                        for (let px = 0; px < pixelSize && x + px < canvas.width; px++) {
                            const i = ((y + py) * canvas.width + (x + px)) * 4;
                            data[i] = r;
                            data[i + 1] = g;
                            data[i + 2] = b;
                        }
                    }
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
            img.src = canvas.toDataURL();
        };
        tempImg.src = img.src;
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
    function loadNews() {
        const newsContainer = document.getElementById('newsContainer');
        const newsData = [
            {
                title: "Latest Cryptocurrency Trends 2024",
                content: "The cryptocurrency market shows significant growth with new technological advances in blockchain and DeFi solutions. Bitcoin and Ethereum continue to lead the market while new platforms emerge.",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'%3E%3Crect width='300' height='200' fill='%234a90e2'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='white' font-size='20'%3ECrypto News%3C/text%3E%3C/svg%3E"
            },
            {
                title: "Web Development Updates",
                content: "New frameworks and tools are revolutionizing web development in 2024. The focus is on performance optimization and improved user experience through innovative technologies.",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'%3E%3Crect width='300' height='200' fill='%239c27b0'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='white' font-size='20'%3EDev News%3C/text%3E%3C/svg%3E"
            },
            {
                title: "AI in Modern Applications",
                content: "Artificial intelligence continues to transform application development with new capabilities in image processing, natural language understanding, and automated coding assistance.",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'%3E%3Crect width='300' height='200' fill='%234caf50'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='white' font-size='20'%3EAI News%3C/text%3E%3C/svg%3E"
            }
        ];

        newsContainer.innerHTML = newsData.map(news => `
            <article class="news-article">
                <img src="${news.image}" alt="${news.title}">
                <h3>${news.title}</h3>
                <p>${news.content}</p>
            </article>
        `).join('');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
    function initializeSettings() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);

        const savedColor = localStorage.getItem('accentColor') || 'blue';
        setAccentColor(savedColor);

        const savedSnowEnabled = localStorage.getItem('snowEnabled') !== 'false';
        setSnowEffect(savedSnowEnabled);

        const savedLanguage = localStorage.getItem('language') || 'en';
        setLanguage(savedLanguage);
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π
    function setTheme(theme) {
        currentTheme = theme;
        document.body.dataset.theme = theme;
        localStorage.setItem('theme', theme);
        
        document.querySelectorAll('.theme-button').forEach(button => {
            button.classList.toggle('active', button.dataset.theme === theme);
        });
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–º –∞–∫—Ü–µ–Ω—Ç–∞
    function setAccentColor(color) {
        const colors = {
            blue: '#4a90e2',
            purple: '#9c27b0',
            green: '#4caf50',
            orange: '#ff9800'
        };
        
        document.documentElement.style.setProperty('--accent-color', colors[color]);
        localStorage.setItem('accentColor', color);
        
        document.querySelectorAll('.color-button').forEach(button => {
            button.classList.toggle('active', button.dataset.color === color);
        });
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–Ω–µ–≥–∞
    function setSnowEffect(enabled) {
        snowEnabled = enabled;
        localStorage.setItem('snowEnabled', enabled);
        document.getElementById('snowToggle').checked = enabled;
        
        if (!enabled) {
            document.querySelectorAll('.snowflake').forEach(flake => flake.remove());
        }
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–º
    function setLanguage(lang) {
        const translations = {
            en: {
                welcome: "Welcome to PixelArt",
                begin: "Let's Begin",
                createArt: "Create Pixel Art",
                articles: "Articles",
                settings: "Settings",
                about: "About App"
            },
            ru: {
                welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ PixelArt",
                begin: "–ù–∞—á–∞—Ç—å",
                createArt: "–°–æ–∑–¥–∞—Ç—å –ü–∏–∫—Å–µ–ª—å –ê—Ä—Ç",
                articles: "–°—Ç–∞—Ç—å–∏",
                settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                about: "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"
            },
            ja: {
                welcome: "PixelArt„Å∏„Çà„ÅÜ„Åì„Åù",
                begin: "Âßã„ÇÅ„Åæ„Åó„Çá„ÅÜ",
                createArt: "„Éî„ÇØ„Çª„É´„Ç¢„Éº„Éà„Çí‰ΩúÊàê",
                articles: "Ë®ò‰∫ã",
                settings: "Ë®≠ÂÆö",
                about: "„Ç¢„Éó„É™„Å´„Å§„ÅÑ„Å¶"
            }
        };

        currentLanguage = lang;
        localStorage.setItem('language', lang);
        
        document.querySelector('.welcome-text').innerHTML = translations[lang].welcome;
        document.querySelectorAll('.menu-button').forEach(button => {
            const key = button.textContent.trim().toLowerCase().replace(/\s+/g, '');
            if (translations[lang][key]) {
                button.textContent = translations[lang][key];
            }
        });
        
        document.querySelectorAll('.lang-button').forEach(button => {
            button.classList.toggle('active', button.dataset.lang === lang);
        });
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
    document.querySelectorAll('.theme-button').forEach(button => {
        button.addEventListener('click', () => setTheme(button.dataset.theme));
    });

    document.querySelectorAll('.color-button').forEach(button => {
        button.addEventListener('click', () => setAccentColor(button.dataset.color));
    });

    document.getElementById('snowToggle').addEventListener('change', function() {
        setSnowEffect(this.checked);
    });

    document.querySelectorAll('.lang-button').forEach(button => {
        button.addEventListener('click', () => setLanguage(button.dataset.lang));
    });
</script>
</body>
</html>
